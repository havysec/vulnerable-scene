<div class='formulaire_spip formulaire_editer formulaire_editer_document formulaire_editer_document-#ENV{id_document,nouveau}'>
	[<p class="reponse_formulaire reponse_formulaire_ok">(#ENV**{message_ok})</p>]
	[<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]
	[(#ENV{editable})
	<form method='post' action='#ENV{action}' enctype='multipart/form-data'><div>
		[(#REM) declarer les hidden qui declencheront le service du formulaire 
		parametre : url d'action ]
		#ACTION_FORMULAIRE{#ENV{action}}
	  <input type='hidden' name='id_document' value='#ENV{id_document}' />
		[(#REM) un bouton submit pour enregistrer qui sera declenche par le return
		il ne doit pas etre hidden pour marcher dans safari
		]
	  <div style="position:absolute;#LANG_LEFT:-10000px;"><input type='submit' class='submit' value='<:bouton_enregistrer:>' /></div>
	  <div class="editer-groupe">
	    <div class="editer editer_titre[ (#ENV**{erreurs}|table_valeur{titre}|oui)erreur]">
		    <label for="titre">[(#ENV{mode}|=={document}|?{<:medias:entree_titre_document:>,<:medias:entree_titre_image:>})]</label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{titre})</span>
				]<input type='text' class='text' name='titre' id='titre' value="[(#ENV**{titre,''})]" />
	    </div>
	  	<div class='editer editer_parent[ (#ENV**{erreurs}|table_valeur{parents}|oui)erreur]'>
	    	<label for="parents"><:medias:label_parents:></label>[
	    	<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{parents})</span>
	    	]<INCLURE{fond=formulaires/selecteur/articles, selected=#ENV{parents}, name=parents, rubriques=1, articles=1} />
	  	</div>
			[<div class="editer editer_fichier[ (#ENV**{erreurs}|table_valeur{fichier}|oui)erreur]">
				<label for="fichier"><:medias:label_fichier:></label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{fichier})</span>
				]
				(#ENV{fichier})
				<p class='actions'>
				[(#ENV{distant}|=={oui}|et{#TAILLE|<{#VAL{_COPIE_LOCALE_MAX_SIZE}|constant}}|oui)  <input type='submit' class='submit' name='copier_local' value='<:medias:bouton_copier_local|attribut_html:>' />]
				[(#PIPELINE{editer_document_actions,#ARRAY{args,#ARRAY{id_document,#ENV{id_document,nouveau}},data,''}})]
				&#91;<a href='#' onclick='jQuery("#changer_fichier_document").toggle("fast");return false;'><:bouton_changer:></a>&#93;
				</p>
				#SET{upload,#INCLURE{fond=formulaires/inc-upload_document, env, joindre_upload=oui}}
				<div id='changer_fichier_document' class="[(#GET{upload}|match{erreur}|non)none-js]">
					#GET{upload}
				</div>
	    </div>]
	  	<div class="editer editer_apercu">
		  	<label><:medias:label_apercu:></label>
		  	[(#ENV{apercu}|oui)
				<div class="tourner">
					<input class="image" type="image" name="tournerL90" src="#CHEMIN_IMAGE{tourner-gauche-12.png}" alt="<:medias:image_tourner_gauche:>" />
					<input class="image" type="image" name="tournerR90" src="#CHEMIN_IMAGE{tourner-droite-12.png}" alt="<:medias:image_tourner_droite:>" />
					<input class="image" type="image" name="tourner180" src="#CHEMIN_IMAGE{tourner-180-12.png}" alt="<:medias:image_tourner_180:>" />
				</div>
				[<a href='#ENV{apercu}'>(#ENV{apercu}|image_reduire{320,200})</a>]
				]
		  	[(#ENV{apercu}|non)
					#SET{hauteur,#HAUTEUR|et{#LARGEUR}|?{#HAUTEUR|div{#LARGEUR}|mult{320}|round{0},200}}
					[(#MEDIA|=={audio}|oui) #SET{hauteur,0}]
					[(#ENV**{_inclus}|=={embed}|?{
						[(#MODELE{emb,id_document=#ENV{id_document,''},largeur=320,hauteur=#GET{hauteur}})]
						,
						[(#MODELE{doc,id_document=#ENV{id_document,''},largeur=320,hauteur=#GET{hauteur}}|extraire_balise{a})]
						})]
				]
	  	</div>
	  	<div class="editer editer_infos">
		  	<label><:medias:label_caracteristiques:></label>
		  	[<span class='type'>(#ENV{type_document}) - </span>]
				<span class='taille'>[(#LARGEUR|ou{#HAUTEUR}|oui)[(#VAL{info_largeur_vignette}|_T{#ARRAY{largeur_vignette,#LARGEUR,hauteur_vignette,#HAUTEUR}})] - 
				][(#TAILLE|taille_en_octets|texte_backend)]</span>
				[(#ENV{_taille_modif}|oui)<div class='taille_modifiee'><:medias:fichier_modifie:><br />[(#ENV{_largeur_modif}|ou{#ENV{_hauteur_modif}}|oui)[(#VAL{info_largeur_vignette}|_T{#ARRAY{largeur_vignette,#ENV{_largeur_modif},hauteur_vignette,#ENV{_hauteur_modif}}})] -
				][(#ENV{_taille_modif}|taille_en_octets|texte_backend)]</div>]
				[(#PIPELINE{afficher_metas_document,#ARRAY{args,#ARRAY{'quoi','editer_document','id_document',#ENV{id_document}},data,''}})]
	  	</div>
			<div class="editer editer_descriptif[ (#ENV**{erreurs}|table_valeur{descriptif}|oui)erreur]">
				<label for="descriptif"><:info_description:></label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{descriptif})</span>
				]<textarea name='descriptif' id='descriptif'[ lang='(#LANGUE)'] rows='2' cols='40'>[(#ENV**{descriptif})]</textarea>
	    </div>
	    [(#ENV{_editer_date})
	    <div class="editer editer_date[ (#ENV**{erreurs}|table_valeur{saisie_date}|oui)erreur][ (#ENV**{erreurs}|table_valeur{saisie_heure}|oui)erreur]">
				<label for="saisie_date" class='date'><:date:></label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{saisie_date})</span>
				]<input type='text' class='text date' name='saisie_date' id='saisie_date' size="10" maxlength="10" value="[(#ENV{saisie_date})]" />
				<span class='choix heure'>
					<label for='saisie_heure' class='heure'><:medias:info_heure:></label>[
					<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{saisie_heure})</span>]
					<input type='text' class='text heure' name='saisie_heure' id='heure' size="5" maxlength="5" value="[(#ENV{saisie_heure})]" />
				</span>
	    </div>
	    ]
	    <div class="editer editer_credits[ (#ENV**{erreurs}|table_valeur{credits}|oui)erreur]">
		    <label for="credits"><:medias:label_credits:></label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{credits})</span>
				]<input type='text' class='text' name='credits' id='credits' value="#ENV**{credits,''}" />
	    </div>
	    [(#ENV{_editer_dimension})
	    <div class="editer editer_dimensions[ (#ENV**{erreurs}|table_valeur{dimensions}|oui)erreur]">
				<label><:medias:entree_dimensions:></label>[
				<span class='erreur_message'>(#ENV**{erreurs}|table_valeur{dimensions})</span>
				]
				<span class='choix largeur'>
					<label for='largeur' class='largeur'><:medias:info_largeur:></label>
				  <input type='text' class='text' name='largeur' id='largeur' value="[(#ENV{largeur})]" />
				</span>
				<span class='choix hauteur'>
					<label for='hauteur' class='hauteur'><:medias:info_hauteur:></label>
					<input type='text' class='text' name='hauteur' id='hauteur' value="[(#ENV{hauteur})]" />
				</span>
	    </div>
	    ]
	  </div>
	  [(#REM) ajouter les saisies supplementaires : extra et autre, a cet endroit ]
	  <!--extra-->
	  <p class="boutons"><span class='image_loading'>&nbsp;</span><input type='submit' class='submit' value='<:bouton_enregistrer:>' /></p>
	</div></form>
	#INCLURE{fond=formulaires/dateur/inc-dateur}
	]
</div>
